<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>
			{% block title %}Welcome!
			{% endblock %}
		</title>
		{# Run `composer require symfony/webpack-encore-bundle`
		and uncomment the following Encore helpers to start using Symfony UX #}
		{% block stylesheets %}
			{#{{ encore_entry_link_tags('app') }}#}
		{% endblock %}


	</head>
	<body>
		{% block body %}{% endblock %}
	</body>

    {% block javascripts %}
		<script src="https://js.stripe.com/v3/"></script>
		<script type="text/javascript">
				// Create an instance of the Stripe object with your publishable API key
		var stripe = Stripe('pk_test_51Ixpg5DmFmsRyV8BtHyBkox7eJ4zuzznNcTWAMdQ2swNMA0bMUfU9aBDmd3A3oQHdolRqF4NDhiT5uo0z3hUmWS600HSp6ohI9');
		var checkoutButton = document.getElementById('checkout-button');
		
		checkoutButton.addEventListener('click', function () {
		// Create a new Checkout Session using the server-side endpoint you
		// created in step 3.
		fetch('/create-checkout-session', {method: 'POST'}).then(function (response) {
		return response.json();
		}).then(function (session) {
		return stripe.redirectToCheckout({sessionId: session.id});
		}).then(function (result) {
		// If `redirectToCheckout` fails due to a browser or network
		// error, you should display the localized error message to your
		// customer using `error.message`.
		if (result.error) {
		alert(result.error.message);
		}
		}).catch(function (error) {
		console.error('Error:', error);
		});
		}); 
	</script>
		{# {{ encore_entry_script_tags('app') }} #}
</html>
		{% endblock %}